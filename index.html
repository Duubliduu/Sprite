<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Duub</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>
<body>


<canvas id="canvas" width="108" height="169"></canvas>


<script src="sprite.js"></script>
<script type="text/javascript">

	(function (){

		/**
		 * Shim layer with setTimeout fallback
		 */
		window.requestAnimFrame = (function(){
		  return  window.requestAnimationFrame       ||
		          window.webkitRequestAnimationFrame ||
		          window.mozRequestAnimationFrame    ||
		          function( callback ){
		            window.setTimeout(callback, 1000 / 60);
		          };
		})();



		// Our "game canvas"
		var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');


		// Preload the sprite image
		var sprite_image = new Image();
		sprite_image.onload = function() {


			// Create a new Sprite object
			var sprite = new Sprite({
				'image': this,
				'fps': 5,
				'width': 108,
				'height': 169,
				'frames': [

					// Hätäset freimit
					{ x: 0, y: 0 },
					{ x: 108, y: 0 },
					{ x: 216, y: 0 },
					{ x: 324, y: 0 },
					{ x: 432, y: 0 },
				]

			});

			// Animate
			(function animloop(){

			 	requestAnimFrame(animloop);
			 	ctx.clearRect(0, 0, 108, 169);
			 	ctx.drawImage(sprite.getFrame(), 0, 0);

			})();

		};

		sprite_image.src = 'mario.png';

	})();

</script>
</body>
</html>